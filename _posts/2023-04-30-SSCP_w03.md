---
layout: post
title: "SSCP:w03"
categories: [lecture]
---

## 데이터 모델링의 개념

현실세계와 데이터베이스는 일치해야 한다.

현실세계 ➡ 개념적모델(ER다이어그램): 정보 모델링

개념적모델(ER다이어그램) ➡ 논리적모델(관계데이터모델): 데이터모델링

논리적모델(관계데이터모델) ➡ 데이터베이스: DB로 구현

다양한 DBMS 중 하나를 고르는 것은 데이터모델링 때!

## 데이터베이스 생명주기

1. 요구사항 수집 및 분석: 요구사항 명세서 작성

    사용자들의 요구사항을 듣고 분석하여 데이터베이스 구축의 범위를 정함

2. 설계 🤩🤩

    분석된 요구사항을 기초로 주요 개념과 업무 프로세스 등을 식별하고(개념적 설계, ERD), 사용하는 데이터모델의 종류에 맞게 변환(논리적 설게, ERD로부터 릴레이션 스키마 도출)한 후, 데이터베이스 스키마를 도출(물리적 설계)함

3. 구현

    설계 단계에서 생성한 스키마를 실제 DBMS에 적용하여 테이블 및 관련 객체(뷰, 인덱스 등)를 만듦

4. 운영

    구현된 데이터베이스를 기반으로 소프트웨어를 구축하여 서비스를 제공함

5. 감시 및 개선

    데이터베이스 운영에 따른 시스템의 문제를 관찰하고 데이터베이스 자체의 문제점을 파악하여 개선함

## 데이터 모델링 과정

1. 요구사항 수집 및 분석

    현실 세계의 대상 및 사용자의 요구 등을 정리 및 분석

    - 사용자 식별

    - 데이터베이스 용도 식별

    - 사용자 요구 사항 수집 및 명세

설계

2. 개념적 모델링

    중요 개념을 구분

    - 핵심 Entity(독립개체) 도출

    - ERD 작성

⬇ 관계데이터모델 선정

3. 논리적 모델링

    각 개념을 구체화

    - ERD-RDB 모델 사상(변환)

    - 상세 속성 정의

    - 정규화 등(이상현상 제거)

        결과로 릴레이션 스키마가 만들어져 어떤 DBMS에서든 적용이 가능해짐. MySQL에서 Oracle DB로 변경이 가능!

⬇ DBMS 선정

4. 물리적 모델링

    데이터베이스 생성 계획에 따라 개체, 인덱스 등을 생성

    - DB개체 정의

    - 테이블 및 인덱스 등 설계

데이터베이스 구현

## 개념적 모델링

- 요구사항을 수집하고 분석한 결과를 토대로 업무의 핵심적인 개념을 구분하고 전체적인 뼈대를 만드는 과정

- 개체(entity)를 추출하고 각 개체들 간의 관계를 정의하여 ER 다이어그램(ERD)을 만드는 과정

- Entity Relationship Diagram

## ER 다이어그램

- ERD
    
    - ER 모델을 개체와 개체 간의 관계를 표준화된 그림으로 나타냄

- 개체(entity)란?

    - 사람, 사물, 장소, 개념, 사건과 같이 유무형의 정보를 가지고 있는 독립적인 실체

    - 비슷한 속성의 개체 타입(entity type)을 구성하며, 개체 집합(entity set)으로 묶임

- 개체 타입의 ER 다이어그램 표현

    - 강한 개체(strong entity): 다른 개체의 도움 없이 독자적으로 존재할 수 있는 개체

    - 약한 개체(weak entity): 독자적으로는 존재할 수 없고 반드시 상위 개체 타입을 가짐

- 속성(attribute)

    - 개체가 가진 성질

- 속성의 ER 다이어그램 표현

    - 타원으로 표현하고 개체(직사각형)와 실선으로 연결

    - 키 속성 이름에 밑줄

- 속성의 유형

    - 속성, 키 속성, 약한 개체의 식별자, 다중값 속성, 유도 속성, 복합 속성

- 키(Key)

    - 특정 투플을 식별할 때 사용하는 속성 혹은 속성의 집합

    - 슈퍼키, 후보키, 기본키, 대리키, 대체키, 외래키

    - 후보키는 투플을 식별할 수 있는 속성의 최소 집합

- 관계(relationship)

    - 개체 사이의 연관성을 나타내는 개념

- 관계 타입(relationship type)

    - 개체 타입과 개체 타입 간의 연결 가능한 관계를 정의한 것이며, 관계 집합(relationship set)은 관계로 연결된 집합을 의미함

- 관계 타입의 ER다이어그램 표현

- 관계 타입의 유형

    - 차수에 따른 분류

        관계 집합에 참가하는 개체 타입의 수를 차수(degree)라고 함

        1진관계, 2진관계, 3진관계

    - 관계 대응수(cardinality)에 따른 분류
        
        두 개체 타입의 관계에 실제로 참여하는 개별 개체 수

        일대일관계, 일대다관계, 다대일관계, 다대다관계

- 참여제약조건

    - 개체 집합 내 모든 개체가 관계에 참여하는지 유무에 따라 전체 참여와 부분 참여로 구분 가능

    - 전체 참여는 개체 집합의 모든 개체가, 부분 참여는 일부만 참여함

    - 학생을 최소 0개 이상의 강좌 필요

    - 강좌는 최소 1개 이상 학생 필요

- 약한 개체 타입과 식별자

    - 약한 개체 타입은 독립적인 키로는 존재할 수 없음

    - 상위 개체 타입의 키와 결합하여 약한 개체 타입의 개별 개체를 고유하게 식별하는 속성을 식별자(discriminator) 혹은 부분키(partical key)라고 함

## 논리적 모델링

- 논리적 모델링
    
    - 개념적 모델링에서 만든 ER 다이어그램을 사용하려는 데이터 모델에 맞게 변환하여 실제 데이터베이스로 구현하기 위한 모델을 만드는 과정
    
    - 관계데이터 모델

## 논리적 모델리 - 변환

- ERD의 관계데이터모델 변환

    - 개념적 모델링에서 만든 ER 다이어그램을 사용하려는 데이터 모델에 맞게 변환하는 과정

    - [1단계] 강한(정규) 개체 타입

        정규 개체 타입 E의 경우 대응하는 릴레이션 R을 생성함

    - [2단계] 약한 개체 타입

        약한 개체 타입에서 생성된 릴레이션은 자신의 키와 함께 강한 개체 타입의 키를 외래키로 사상하여 자신의 기본키를 구성함

    - 관계타입의 변환

    - [3단계] 이진 1:1 관계 타입

        이진 1:1 관계 타입의 경우 [방법1] ~ [방법5]까지 모든 유형으로 사상 가능, 개체가 가진 정보 유형에 따라 판단

    - [4단계] 이진 1:N 관계 타입

        이진 1:N 관계 타입의 경우 N의 위치에 따라 [방법1] 또는 [방법2]의 유형으로 사상

        *무조건! 1 ➡ N으로*

    - [5단계] 이진 M:N 관계 타입

        이진 M:N 관계 타입은 [방법4]의 유형으로 사상됨

    - [6단계] N진 관계 타입

        ER 모델의 차수가 3 이상인 다진 관계 타입의 경우 [방법4]의 유형으로 사상

    - [7단계] 다중값 속성
        
        속성의 개수를 알 수 없는 경우 [방법1]을, 속성의 개수가 제한적으로 정해지는 경우 [방법2]를 사용

        *확장성이 좋으냐, 처리속도가 빠르냐의 차이*

    - 기타 고려 사항
    
        모든 관계는 독립적인 릴레이션으로 변환 가능

        개체가 자기 자신과 관계를 맺는 순환 관계도 기본 규칙을 그대로 적용

## 논리적 모델링 - 정규화

- 이상현상 : 삭제이상, 삽입이상, 수정이상

- 함수 종속성과 결정자

    - 어떤 속성 A의 값을 알면 다른 속성 B의 값이 유일하게 정해지는 의존 관계를 '속성 B는 속성 A에 종속한다(dependent)'혹은 '속성 A는 속성 B를 결정한다(determine)'라고 함

    - 'A ➡ B'로 표기하며, A를 B의 결정자라고 함

- 이상현상과 결정자: 밀접한 연관

    - 이상현상은 한 개의 릴레이션에 두 개 이상의 정보가 포함되어 있을 때 나타남

        기본키가 아니면서 결정자인 속성이 있을 때 발생함

    - 릴레이션의 무손실 분해를 통해 해결

- 무손실 분해

    - 릴레이션 R을 릴레이션 R1과 R2로 분해할 때, R1과 R2를 join한 결과가 R이면 무손실 분해(lossless-join decomposition)라고 함

- 정규화

    - 이상현상이 발생하는 릴레이션을 분해하여 이상현상을 없애는 과정

        높은 정규형일수록 이상현상 줄어듦

        비정규형 릴레이션 ➡ 제1정규형 릴레이션 ➡ 제2정규형 릴레이션 ➡ 제3정규형 릴레이션 ➡ 보이스/코드 정규형 릴레이션

    - 제1정규형

        릴레이션 R의 모든 속성 값이 원자값을 가짐

    - 제2정규형

        릴레이션 R이 제1정규형 만족

        기본키가 아닌 모든 속성이 기본키에 완전함수종속
        
        A와 B가 릴레이션 R의 속성이고 A ➡ B 종속성이 성립할 때, B가 A의 속성 전체에 함수 종속하고 부분 집합 속성에 함수 종속하지 않을 경우 완전 함수 종속이라고 함

        *기본키에 부분함수종속이 발생하면 안 됨*

    - 제3정규형

        릴레이션 R이 제2정규형 만족

        기본키가 아닌 속성이 기본키에 비이행적(non-transitive)으로 종속(직접 종속)

        이행적 종속이란 A ➡ B, B ➡ C가 성립할 때 A ➡ C가 성립되는 함수 종속성

        *이행적 종속이 있으면 안 됨*

    - 정규화

        - BCNF(Boyce-Codd Normal Form)(3.5NF)

            릴레이션 R이 제3정규형 만족

            릴레이션 R에서 함수 종속성 X ➡ Y가 성립할 때 모든 결정자 X가 후보키

            *후보키도 아닌데 결정을 하면 안 된다*

## 물리적 모델링

- 작성된 논리적 모델을 특정 DBMS에 저장하기 위한 물리적 구조를 정의하고 구현하는 과정

*이렇게 되면 쉽게 DB 구축 가능*

## DBMS Architecture

- 1-Tier vs 2-Tier vs 3-Tier

- **1-Tier**

    - 클라이언트까지 같은 PC에 있는 경우

    - 로컬서버 사용

    - 다른 사람들의 서버 접근이 어려움
    
    - 상용화x

- **2-Tier**

    - Database와 Webserver를 같은 서버에 두는 것

    - 사용자가 많아지면 터질 수 있음

- **3-Tier**

    - 웹 서버와 데이터 분리

    - 최소 2개 Instance 생성

## GCP Compute Engine VM 인스턴스 생성

- 인스턴스 초기 설정

    ```
    sudo apt update
    ```
    ```
    sudo apt upgrade
    ```
    ```
    sudo apt install build-essential
    ```

- 원격에서 VM 접근

    로컬 PC에서 ssh key 생성(없는 경우)

    ```
    ssh-keygen
    ```

    .ssh/id_rsa.pub의 내용 복사, 등록

    로컬 PC의 터미널에서 ssh를 통해 접근

    ```
    ssh <계정이름>@<외부IP>
    ```

    SSH 접속 시 IP 대신 별명 사용하기
    ```
    vim ~/.ssh/config
    ```
    ```
    //config내용
    Host serverNickname
        HostName 34.64.253.87
        User user01
    ```
    ```
    chmod 440 ~/.ssh/config
    ```
    
    다음에 접속할 때는
    ```
    ssh <계정이름>@serverNickname
    ```

---

## 질의응답

다중값 속성: 취미(수영, 자전거...), 겹원

복합 속성: 주소(시, 동, 번지)